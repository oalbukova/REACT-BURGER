(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{10:function(e,t,n){e.exports={container:"ingredient-details_container__1rRjF",ingredient:"ingredient-details_ingredient__2fwBi",image:"ingredient-details_image__3S2tG",name:"ingredient-details_name__2uAj3",info:"ingredient-details_info__227R4",item:"ingredient-details_item__12Gl3"}},14:function(e,t,n){e.exports={header:"app-header_header__Vw8Ue",container:"app-header_container__3WK9m",nav:"app-header_nav__qxaLC",navLink:"app-header_navLink__VapAo"}},15:function(e,t,n){e.exports={burgerConstructor:"burger-constructor_burgerConstructor__1lPyN",list:"burger-constructor_list__2JohF",middleContainer:"burger-constructor_middleContainer__2zFY8",itemContainer:"burger-constructor_itemContainer__3XZGc",summary:"burger-constructor_summary__KJCVi",price:"burger-constructor_price__1gqni"}},154:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),i=n(25),r=n.n(i),s=(n(75),n(6)),l=a.a.createContext([]),o=n(14),d=n.n(o),m=n(4),j=n(0),u=function(){return Object(j.jsx)("header",{className:d.a.header,children:Object(j.jsxs)("div",{className:d.a.container,children:[Object(j.jsxs)("nav",{className:d.a.nav,children:[Object(j.jsxs)("a",{href:"#",className:"".concat(d.a.navLink," pl-5 pr-5"),children:[Object(j.jsx)(m.BurgerIcon,{type:"primary"}),Object(j.jsx)("p",{className:"text text_type_main-default ml-2",children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]}),Object(j.jsxs)("a",{href:"#",className:"".concat(d.a.navLink," pl-5 pr-5 ml-2"),children:[Object(j.jsx)(m.ListIcon,{type:"secondary"}),Object(j.jsx)("p",{className:"text text_type_main-default text_color_inactive ml-2",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})]}),Object(j.jsx)(m.Logo,{}),Object(j.jsxs)("a",{href:"#",className:"".concat(d.a.navLink," pl-5 pr-5"),children:[Object(j.jsx)(m.ProfileIcon,{type:"secondary"}),Object(j.jsx)("p",{className:"text text_type_main-default text_color_inactive ml-2",children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})]})})},b=n(44),x=n.n(b),_=n(18),p=n.n(_),O=n(20),h=n(47),f=n(45),g=n.n(f),y=n(7),v=n.n(y),N=(v.a.shape({_id:v.a.string,name:v.a.string.isRequired,type:v.a.string.isRequired,proteins:v.a.number.isRequired,fat:v.a.number.isRequired,carbohydrates:v.a.number.isRequired,calories:v.a.number.isRequired,price:v.a.number.isRequired,image:v.a.string.isRequired,image_mobile:v.a.string,image_large:v.a.string,__v:v.a.number}),n(156)),C=function(e){var t=e.ingredient,n=e.setIngredient,a=e.handleOpenIngredientModal,i=Object(c.useContext)(l),r=i.setSelectedBun,s=i.selectedNotBun,o=i.setSelectedNotBun,d=i.selectedId,u=i.setSelectedId;return Object(j.jsxs)("li",{className:"".concat(g.a.item," mb-7"),onClick:function(){n(t),function(e){u([].concat(Object(h.a)(d),[e._id])),"bun"===e.type?r([Object(O.a)(Object(O.a)({},e),{},{key:Object(N.a)()})]):o([].concat(Object(h.a)(s),[Object(O.a)(Object(O.a)({},e),{},{key:Object(N.a)()})]))}(t),a()},children:["\u041a\u0440\u0430\u0442\u043e\u0440\u043d\u0430\u044f \u0431\u0443\u043b\u043a\u0430 N-200i"===t.name||"\u0421\u043e\u0443\u0441 \u0444\u0438\u0440\u043c\u0435\u043d\u043d\u044b\u0439 Space Sauce"===t.name?Object(j.jsx)(m.Counter,{count:1,size:"default"}):null,Object(j.jsx)("img",{src:t.image,alt:"ingredient"}),Object(j.jsxs)("div",{className:"".concat(g.a.price," mt-1 mb-2"),children:[Object(j.jsx)("p",{className:"text text_type_digits-default mr-2",children:t.price}),Object(j.jsx)(m.CurrencyIcon,{type:"primary"})]}),Object(j.jsx)("p",{className:"text text_type_main-default",children:t.name})]})},I=function(e){var t=e.handleOpenIngredientModal,n=e.setIngredient,a=Object(c.useState)("bun"),i=Object(s.a)(a,2),r=i[0],o=i[1],d=Object(c.useContext)(l).stateData,u=Object(c.useRef)(null),b=Object(c.useRef)(null),x=Object(c.useRef)(null),_=function(e,t){o(e),t.current.scrollIntoView({behavior:"smooth"})},O=d.filter((function(e){return"bun"===e.type})),h=d.filter((function(e){return"sauce"===e.type})),f=d.filter((function(e){return"main"===e.type}));return Object(j.jsxs)("section",{className:p.a.burgerIngredients,children:[Object(j.jsxs)("div",{style:{display:"flex"},children:[Object(j.jsx)(m.Tab,{value:"bun",active:"bun"===r,onClick:function(){return _("bun",u)},children:"\u0411\u0443\u043b\u043a\u0438"}),Object(j.jsx)(m.Tab,{value:"sauces",active:"sauces"===r,onClick:function(){return _("sauces",b)},children:"\u0421\u043e\u0443\u0441\u044b"}),Object(j.jsx)(m.Tab,{value:"main",active:"main"===r,onClick:function(){return _("main",x)},children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})]}),Object(j.jsxs)("div",{className:"".concat(p.a.container," mt-10"),children:[Object(j.jsx)("h2",{className:"text text_type_main-medium",id:"bun",ref:u,children:"\u0411\u0443\u043b\u043a\u0438"}),Object(j.jsx)("ul",{className:"".concat(p.a.list," mt-6 mb-10 ml-4 mr-2"),children:O.map((function(e){return Object(j.jsx)(C,{ingredient:e,handleOpenIngredientModal:t,setIngredient:n},e._id)}))}),Object(j.jsx)("h2",{className:"text text_type_main-medium",id:"sauces",ref:b,children:"\u0421\u043e\u0443\u0441\u044b"}),Object(j.jsx)("ul",{className:"".concat(p.a.list," mt-6 mb-10 ml-4 mr-2"),children:h.map((function(e){return Object(j.jsx)(C,{ingredient:e,handleOpenIngredientModal:t,setIngredient:n},e._id)}))}),Object(j.jsx)("h2",{className:"text text_type_main-medium mb-3",id:"main",ref:x,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"}),Object(j.jsx)("ul",{className:"".concat(p.a.list," mt-6 mb-10 ml-4 mr-2"),children:f.map((function(e){return Object(j.jsx)(C,{ingredient:e,handleOpenIngredientModal:t,setIngredient:n},e._id)}))})]})]})},k=n(15),S=n.n(k),w=function(e){var t=e.handleOpenOrderModal,n=Object(c.useContext)(l),a=n.selectedBun,i=n.selectedNotBun,r=Object(c.useState)(!1),o=Object(s.a)(r,2),d=o[0],u=o[1],b=Object(c.useMemo)((function(){return i.reduce((function(e,t){return e+t.price}),0)+a.reduce((function(e,t){return e+2*t.price}),0)}),[i,a]);return Object(c.useEffect)((function(){0===b||0===a.length?u(!0):u(!1)}),[b,a]),Object(j.jsxs)("section",{className:"".concat(S.a.burgerConstructor," ml-10 pl-4"),children:[Object(j.jsxs)("ul",{className:"".concat(S.a.list),children:[a&&a.map((function(e){return Object(j.jsx)("li",{className:"ml-8 mb-4",children:Object(j.jsx)(m.ConstructorElement,{type:"top",isLocked:!0,text:"".concat(e.name," (\u0432\u0435\u0440\u0445)"),price:e.price,thumbnail:e.image})},e.key)})),Object(j.jsx)("div",{className:"".concat(S.a.middleContainer," pr-2"),children:i&&i.map((function(e){return Object(j.jsxs)("li",{className:"".concat(S.a.itemContainer," mb-4"),children:[Object(j.jsx)(m.DragIcon,{type:"primary"}),Object(j.jsx)(m.ConstructorElement,{text:e.name,price:e.price,thumbnail:e.image})]},e.key)}))}),a&&a.map((function(e){return Object(j.jsx)("li",{className:"ml-8",children:Object(j.jsx)(m.ConstructorElement,{type:"bottom",isLocked:!0,text:"".concat(e.name," (\u043d\u0438\u0437)"),price:e.price,thumbnail:e.image})},e.key)}))]}),Object(j.jsxs)("div",{className:"".concat(S.a.summary," mt-10 pr-4"),children:[Object(j.jsxs)("div",{className:"".concat(S.a.price," mr-10"),children:[Object(j.jsx)("p",{className:"text text_type_digits-medium pr-2",children:b}),Object(j.jsx)(m.CurrencyIcon,{type:"primary"})]}),Object(j.jsx)(m.Button,{type:"primary",size:"large",onClick:t,id:"orderBtn",disabled:d,children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})]})},L=function(e){var t=e.setIngredient,n=e.handleOpenOrderModal,c=e.handleOpenIngredientModal;return Object(j.jsxs)("main",{className:"".concat(x.a.main," pl-5 pr-5"),children:[Object(j.jsx)("h1",{className:"text text_type_main-large mt-10 mb-5",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(j.jsxs)("div",{className:x.a.container,children:[Object(j.jsx)(I,{handleOpenIngredientModal:c,setIngredient:t}),Object(j.jsx)(w,{handleOpenOrderModal:n})]})]})},B=n(68),M=n.n(B),E=function(){return Object(j.jsx)("div",{className:"modalOverlay ".concat(M.a.modalOverlay)})},R=n(46),q=n.n(R),D=document.getElementById("modals"),F=function(e){var t=e.handleClose,n=e.children;return Object(c.useEffect)((function(){var e=function(e){"Escape"===e.key&&t()},n=function(e){e.target.classList.contains("modalOverlay")&&t()};return window.addEventListener("keydown",e),window.addEventListener("mousedown",n),function(){window.removeEventListener("keydown",e),window.removeEventListener("mousedown",n)}}),[t]),r.a.createPortal(Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(E,{}),Object(j.jsxs)("div",{className:"".concat(q.a.modal," pt-10 pl-10 pr-10 pb-15"),children:[Object(j.jsx)("div",{className:q.a.close,children:Object(j.jsx)(m.CloseIcon,{type:"primary",onClick:t})}),n]})]}),D)},P=n(10),T=n.n(P),z=function(e){var t=e.ingredient;return Object(j.jsxs)("div",{className:"".concat(T.a.container," mt-3"),children:[Object(j.jsx)("h2",{className:"text text_type_main-large",children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(j.jsxs)("div",{className:"".concat(T.a.ingredient," mt-3"),children:[Object(j.jsx)("img",{src:t.image,className:"".concat(T.a.image," pl-5 pr-5 mt-3 mb-4"),alt:t.name}),Object(j.jsx)("h3",{className:"".concat(T.a.name," text text_type_main-medium mb-8"),children:t.name}),Object(j.jsxs)("ul",{className:"".concat(T.a.info),children:[Object(j.jsxs)("li",{className:"".concat(T.a.item," text text_type_main-default text_color_inactive pl-2 pr-2"),children:[Object(j.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b"}),Object(j.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:t.calories})]}),Object(j.jsxs)("li",{className:"".concat(T.a.item," text text_type_main-default text_color_inactive pl-2 pr-2"),children:[Object(j.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(j.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:t.proteins})]}),Object(j.jsxs)("li",{className:"".concat(T.a.item," text text_type_main-default text_color_inactive pl-2 pr-2"),children:[Object(j.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(j.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:t.fat})]}),Object(j.jsxs)("li",{className:"".concat(T.a.item," text text_type_main-default text_color_inactive pl-2 pr-2"),children:[Object(j.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(j.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:t.carbohydrates})]})]})]})]})},G=n.p+"static/media/done.f3932884.png",J=n(27),V=n.n(J),A=function(e){var t=e.number;return Object(j.jsxs)("div",{className:"".concat(V.a.orderDetails," pt-20 pb-15"),children:[Object(j.jsx)("h2",{className:"".concat(V.a.title," text text_type_digits-large mb-8"),children:t}),Object(j.jsx)("p",{className:"text text_type_main-medium",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(j.jsx)("img",{src:G,className:"".concat(V.a.image," mt-15 mb-15"),alt:"\u0433\u043e\u0442\u043e\u0432\u043e"}),Object(j.jsx)("p",{className:"text text_type_main-default mb-2",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(j.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})},K=n(69),W=n.n(K),X=function(e){var t=e.text;return Object(j.jsx)("div",{className:"".concat(W.a.container," mt-20 mb-20"),children:Object(j.jsx)("h2",{className:"text text_type_main-large",children:t})})},Z=n(70),H=n.n(Z),Q="https://norma.nomoreparties.space/api/",U=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)({}),r=Object(s.a)(i,2),o=r[0],d=r[1],m=Object(c.useState)([]),b=Object(s.a)(m,2),x=b[0],_=b[1],p=Object(c.useState)([]),O=Object(s.a)(p,2),h=O[0],f=O[1],g=Object(c.useState)([]),y=Object(s.a)(g,2),v=y[0],N=y[1],C=Object(c.useState)(!1),I=Object(s.a)(C,2),k=I[0],S=I[1],w=Object(c.useState)(!1),B=Object(s.a)(w,2),M=B[0],E=B[1],R=Object(c.useState)({}),q=Object(s.a)(R,2),D=q[0],P=q[1],T=Object(c.useState)(!1),G=Object(s.a)(T,2),J=G[0],V=G[1],K=Object(c.useState)(null),W=Object(s.a)(K,2),Z=W[0],U=W[1],Y=function(){V(!0)};Object(c.useEffect)((function(){fetch("".concat(Q,"ingredients")).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).then((function(e){return a(e.data)})).catch((function(e){Y(),U("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u0430: ".concat(e))}))}),[]);var $={stateData:n,selectedBun:x,setSelectedBun:_,selectedNotBun:h,setSelectedNotBun:f,selectedId:v,setSelectedId:N};return Object(j.jsxs)("div",{className:H.a.app,children:[Object(j.jsx)(u,{}),Object(j.jsxs)(l.Provider,{value:$,children:[Object(j.jsx)(L,{setIngredient:d,handleOpenIngredientModal:function(){S(!0)},handleOpenOrderModal:function(){return fetch("".concat(Q,"orders"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ingredients:v})}).then((function(e){return e.ok,e.json()})).then((function(e){P(e.order),E(!0)})).catch((function(e){Y(),U("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u0430: ".concat(e))}))},handleOpenErrModal:Y,setError:U}),k&&Object(j.jsx)(F,{handleClose:function(){S(!1)},children:Object(j.jsx)(z,{ingredient:o})}),M&&Object(j.jsx)(F,{handleClose:function(){E(!1)},children:Object(j.jsx)(A,{number:D.number})}),J&&Object(j.jsx)(F,{handleClose:function(){V(!1)},children:Object(j.jsx)(X,{text:Z})})]})]})},Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,157)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),i(e),r(e)}))};r.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(U,{})}),document.getElementById("root")),Y()},18:function(e,t,n){e.exports={burgerIngredients:"burger-ingredients_burgerIngredients__1WB_z",container:"burger-ingredients_container__2ye6O",list:"burger-ingredients_list__KSvaX"}},27:function(e,t,n){e.exports={orderDetails:"order-details_orderDetails__3Pwkv",title:"order-details_title__20kNq",image:"order-details_image__1Cylb"}},44:function(e,t,n){e.exports={main:"main_main__1VeOx",container:"main_container__2zaAZ"}},45:function(e,t,n){e.exports={item:"ingredient_item__MWlnl",price:"ingredient_price__12lL-"}},46:function(e,t,n){e.exports={modal:"modal_modal__QjxD8",close:"modal_close__2HRwr"}},68:function(e,t,n){e.exports={modalOverlay:"modal-overlay_modalOverlay__2DmsG"}},69:function(e,t,n){e.exports={container:"err_container__G_leO"}},70:function(e,t,n){e.exports={app:"app_app__jl1xF"}},75:function(e,t,n){}},[[154,1,2]]]);
//# sourceMappingURL=main.f6da5df9.chunk.js.map